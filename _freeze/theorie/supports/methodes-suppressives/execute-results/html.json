{
  "hash": "5b954e089fb8032aee31cf1b78bb5d66",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Les méthodes suppressives\nsubtitle: |\n  **[Pour données tabulées ou individuelles]{.orange}**\norder: 3\nhref: theorie/supports/methodes-suppressives.html\nimage: ../../images/theorie.png\n# date: \nslide-number: true\nheader: |\n  [Retour à l'accueil](https://github.com/InseeFrLab/formation_protection_donnees)\nfooter: |\n  Les méthodes de protection statistique des données confidentielles\n# uncomment for French presentations:\nlang: fr-FR\n# for blind readers:\nslide-tone: false\n# for @olevitt:\n# chalkboard: # press the B key to toggle chalkboard\n#   theme: whiteboard\n# uncomment to use the multiplex mode:\n#multiplex: true\nformat:\n  onyxia-revealjs\n  # pick the light mode (onyxia-revealjs) or the dark mode (onyxia-dark-revealjs)\n  #onyxia-dark-revealjs:\ncontrols: true\ncss: custom.css\n# from: markdown+emoji\n# listing:\n#   id: sample-listings\n#   contents: teaching\n#   sort: \"date desc\"\n#   type: table\nbibliography: ../../references-SDC.bib\n# csl: ../style.csl  # Décommentez besoin d'un style de biblio spécifique\n---\n\n## Les méthodes à disposition\n\n::: frame\n\nDeux types de méthodes en fonction du moment où elles sont appliquées :\n\n- Les **méthodes pré-tabulation** sont appliquées sur les données individuelles, *i.e.* **avant** toute tabulation\n- Les **méthodes post-tabulation** sont appliquées sur les données agrégées, *i.e.* **après** tabulation\n\n:::\n\n## Les méthodes à disposition\n\n| Type de méthode     | Type de données                     | **Méthodes**                          |\n|---------------------|-------------------------------------|----------------------------------------|\n| Pré-tabulation      | Micro-données\\index{Microdata}      | Recodage des variables  <br> Suppression locale |\n| Post-tabulation     | Données tabulées                    | Suppression de cellules <br> Regroupement de catégories |\n\n\n# Les méthodes pré-tabulation\n\n## Le recodage des variables\n\n| id | âge | Genre | Profession   |\n|----|-----|-------|--------------|\n| 1  | 23  | H     | statistiques |\n| 2  | 24  | H     | statistiques |\n| 3  | 50  | F     | statistiques |\n| 4  | 53  | H     | statistiques |\n| 5  | 51  | F     | statistiques |\n\n## Le recodage des variables\n\n| id | âge   | Genre | Profession   |\n|----|-------|-------|--------------|\n| 1  | 20-30 | H     | statistiques |\n| 2  | 20-30 | H     | statistiques |\n| 3  | 50-60 | F     | statistiques |\n| 4  | 50-60 | H     | statistiques |\n| 5  | 50-60 | F     | statistiques |\n\n## La suppression locale\n\nS'applique aux variables catégorielles.\n\n. . .\n\nSuppression d'au moins une catégorie présente dans une combinaison à risque, i.e. on la remplace par une **valeur manquante**.\n\n. . . \n\n| id | Lieu de résidence | Genre | Profession   |\n|----|-------------------|-------|--------------|\n| 1  | poitiers          | H     | statistiques |\n| 2  | poitiers          | H     | statistiques |\n| 3  | barfleur          | H     | pêche        |\n| 4  | barfleur          | H     | pêche        |\n| 5  | barfleur          | F     | maire        |\n\n## La suppression locale\n\n| id | Lieu de résidence | Genre | Profession   |\n|----|-------------------|-------|--------------|\n| 1  | poitiers          | H     | statistiques |\n| 2  | poitiers          | H     | statistiques |\n| 3  | barfleur          | H     | pêche        |\n| 4  | barfleur          | H     | pêche        |\n| 5  | barfleur          | F     | *NA*         |\n\n# Les méthodes post-tabulation\n\nRegroupement des catégories et suppression de cellules.\n\n## Tableaux d'effectifs\n\n|                   | Nord | Ouest | Est | Sud | Total |\n|:------------------|-----:|------:|----:|----:|------:|\n| **Polluante**     |    6 |    14 |   1 |   7 |    28 |\n| **Non polluante** |    3 |     2 |   1 |  13 |    19 |\n| **Total**         |    9 |    16 |   2 |  20 |    47 |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 1 – Nombre d'entreprises polluantes par région\n</div>\n\n. . .\n\nY a-t-il des cellules à risque ?\n\n## Tableaux d'effectifs\n\n**Règle de fréquence** : une cellule d'un tableau ne doit pas être construite à partir de strictement moins de n unités (n > 0).  \n\n<br>\n\nPour les données entreprises à l'Insee, n = 3.\n\n## Tableaux d'effectifs\n\n|                   | Nord | Ouest | Est | Sud | Total |\n|:------------------|-----:|------:|----:|----:|------:|\n| **Polluante**     |    6 |    14 | <span style=\"color: red;\">1</span> |   7 |    28 |\n| **Non polluante** |    3 | <span style=\"color: red;\">2</span> | <span style=\"color: red;\">1</span> |  13 |    19 |\n| **Total**         |    9 |    16 | <span style=\"color: red;\">2</span> |  20 |    47 |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 1 – Nombre d'entreprises polluantes par région\n</div>\n\n## Tableaux de volume\n\n|                   | Harpes | Piano | Orgues  |  Total |\n|:------------------|------:|------:|------:|------:|------:|\n| **Nord**          |     58 |     71 |     92 |    221 |\n| **Centre**        |     11 |    124 |    157 |    292 |\n| **Sud**           |     36 |     24 |     60 |    120 |\n| **Total**         |    105 |    219 |    309 |    633 |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 2 – Répartition des ventes d'instruments par région et par type, en millions d'euros\n</div>\n\n. . .\n\nY a-t-il des cellules à risque ?\n\n## Tableaux de volume\n\n| Région     | Harpes           | Piano            | Orgues           | Total            |\n|:-----------|-----------------:|-----------------:|-----------------:|-----------------:|\n| **Nord**   | 58 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (5)</span>   | 71 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (17)</span>  | 92 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (5)</span>   | 221 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (27)</span> |\n| **Centre** | 11 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (4)</span>   | 124 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (11)</span> | 157 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (2)</span>  | 292 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (17)</span> |\n| **Sud**    | 36 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (3)</span>   | 24 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (6)</span>   | 60 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (1)</span>   | 120 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (10)</span> |\n| **Total**  | 105 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (12)</span> | 219 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (34)</span> | 309 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (8)</span>  | 633 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (54)</span> |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 2 – Répartition des ventes d'instruments par région et par type, en millions d'euros\n</div>\n\n<div style=\"font-size: 0.9em; margin-top: 0.5em;\">\n  <em>Note :</em> les valeurs entre parenthèses indiquent le <span style=\"color:blue;\">nombre de contributeurs</span>.\n</div>\n\n## Tableaux de volume\n\nSecret primaire de fréquence.\n\n| Région     | Harpes           | Piano            | Orgues           | Total            |\n|:-----------|-----------------:|-----------------:|-----------------:|-----------------:|\n| **Nord**   | 58 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (5)</span>   | 71 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (17)</span>  | 92 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (5)</span>   | 221 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (27)</span> |\n| **Centre** | 11 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (4)</span>   | 124 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (11)</span> | 157 <span style=\"color:red;\" title=\"n<3\"> (2)</span>  | 292 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (17)</span> |\n| **Sud**    | 36 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (3)</span>   | 24 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (6)</span>   | 60 <span style=\"color:red;\" title=\"n<3\"> (1)</span>   | 120 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (10)</span> |\n| **Total**  | 105 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (12)</span> | 219 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (34)</span> | 309 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (8)</span>  | 633 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (54)</span> |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 2 – Répartition des ventes d'instruments par région et par type, en millions d'euros\n</div>\n\n<div style=\"font-size: 0.9em; margin-top: 0.5em;\">\n  <em>Note :</em> les valeurs entre parenthèses indiquent le <span style=\"color:blue;\">nombre de contributeurs</span>.\n</div>\n\n## Tableaux de volume\n\n**Règle de dominance (n,k)** : une cellule est sensible si les n plus grands contributeurs de cette cellule représentent plus de k% du total de celle-ci.\n\n<br>\n\n- Pour les données entreprises à l'Insee, n = 1 et k = 85. Donc, 1 unité contributrice à une cellule ne peut contribuer à plus de 85% de la valeur de celle-ci.\n- Pour chaque cellule du tableau, besoin de déterminer le plus gros contributeur.\n\n## Tableaux de volume\n\nSecret primaire de dominance.\n\n| Région     | Harpes           | Piano            | Orgues           | Total            |\n|:-----------|-----------------:|-----------------:|-----------------:|-----------------:|\n| **Nord**   | 58 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (5)</span>   | 71 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (17)</span>  | <span style=\"color:orange;\" title=\"92 = 86 + 3 + 1 + 1 + 1\">92</span> <span style=\"color:orange;\" title=\"k = 93% > 85%\"> (5)</span>   | 221 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (27)</span> |\n| **Centre** | 11 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (4)</span>   | 124 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (11)</span> | 157 <span style=\"color:red;\" title=\"SP fréquence\"> (2)</span>  | 292 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (17)</span> |\n| **Sud**    | 36 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (3)</span>   | 24 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (6)</span>   | 60 <span style=\"color:red;\" title=\"SP fréquence\"> (1)</span>   | 120 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (10)</span> |\n| **Total**  | 105 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (12)</span> | 219 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (34)</span> | 309 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (8)</span>  | 633 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (54)</span> |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 2 – Répartition des ventes d'instruments par région et par type, en millions d'euros\n</div>\n\n<div style=\"font-size: 0.9em; margin-top: 0.5em;\">\n  <em>Note :</em> les valeurs entre parenthèses indiquent le <span style=\"color:blue;\">nombre de contributeurs</span>.\n</div>\n\n## Tableaux de volume\n\n**Règle du p%** : une cellule est sensible si l'un des contributeurs a une cellule peut estimer la valeur d'un autre contributeur à p% de sa véritable valeur.\n\n- En pratique, le 2eme contributeur de la valeur de la cellule ne doit pas pouvoir estimer en utilisant sa propre valeur, celle du premier contributeur avec une précision supérieure à p%.\n- Il est d'usage de choisir p = 10.\n- Pas utilisée à l'Insee mais recommandée par les experts européens.\n\n## Tableaux de volume\n\nSecret primaire dû à la règle du p%.\n\n| Région     | Harpes           | Piano            | Orgues           | Total            |\n|:-----------|-----------------:|-----------------:|-----------------:|-----------------:|\n| **Nord**   | 58 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (5)</span>   | 71 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (17)</span>  | <span style=\"color:orange;\" title=\"92 = 86 + 3 + 1 + 1 + 1\">92</span> <span style=\"color:orange;\" title=\"k = 93% > 85%\"> (5)</span>   | 221 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (27)</span> |\n| **Centre** | 11 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (4)</span>   | 124 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (11)</span> | 157 <span style=\"color:red;\" title=\"SP fréquence\"> (2)</span>  | 292 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (17)</span> |\n| **Sud**    | <span style=\"color:purple;\" title=\"36 = 19 + 16 + 1\">36</span> <span style=\"color:purple;\" title=\"p = 5,3% < 10%\"> (3)</span>   | 24 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (6)</span>   | 60 <span style=\"color:red;\" title=\"SP fréquence\"> (1)</span>   | 120 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (10)</span> |\n| **Total**  | 105 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (12)</span> | 219 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (34)</span> | 309 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (8)</span>  | 633 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (54)</span> |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 2 – Répartition des ventes d'instruments par région et par type, en millions d'euros\n</div>\n\n<div style=\"font-size: 0.9em; margin-top: 0.5em;\">\n  <em>Note :</em> les valeurs entre parenthèses indiquent le <span style=\"color:blue;\">nombre de contributeurs</span>.\n</div>\n\n## Le secret primaire\n\nLes cellules catégorisées à risque pour la règle de fréquence, la règle de dominance et la règle du p% constituent le secret primaire. On ne peut pas diffuser ces cellules.\n\n<br>\n\nComment faire ?\n\n## Le regroupement de catégories\nRedéfinir le contenu des variables de croisement en **diminuant le nombre de** leur **modalités**.\n\n<br>\n\nPermet de réduire fortement, voir d'enlever complètement le secret primaire. \n\n<br>\n\nEnvisager cette option avant les autres méthodes.\n\n## Le recodage : un exemple\n\n|                   | <25 | 25-30 | 30-50 | > 50 | Total |\n|:------------------|----:|------:|------:|-----:|------:|\n| **Polluante**     |   <span style=\"color: red;\">2</span> |     5 |     7 |    6 |    20 |\n| **Non polluante** |   8 |    15 |    17 |   20 |    60 |\n| **Total**         |  10 |    20 |    24 |   26 |    80 |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 3 – Nombre d'entreprises polluantes selon l'âge du dirigeant\n</div>\n\n. . .\n\nDéfinir de nouvelles modalités pour augmenter le nombre de répondants par cellule.\n\n## Le recodage : un exemple\n\n|                   | <28 | 28-35 | 35-55 | > 55 | Total |\n|:------------------|----:|------:|------:|-----:|------:|\n| **Polluante**     |   3 |     6 |     6 |    5 |    20 |\n| **Non polluante** |   9 |    17 |    19 |   15 |    60 |\n| **Total**         |  12 |    23 |    25 |   20 |    80 |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 3bis – Nombre d'entreprises polluantes selon l'âge du dirigeant\n</div>\n\n## Le recodage : à vous de jouer !\n\nOn cherche à publier le tableau suivant :\n\n- Population d'une région par leur zone d'emploi de résidence, leur zone d'emploi de travail, leur profession et leur âge.\n- Beaucoup de secret primaire dans ce tableau puisque la plupart des gens résident et travaillent dans la même zone d'emploi.\n- Comment recoder ce tableau ?\n\n. . .\n\nUn premier recodage consiste à regrouper toutes les zones d'emploi de travail hors région dans une seule catégorie.\n\n## Le recodage\n\n| 👍 | 👎 |\n|:--:|:--:|\n| Réduit le SP. | Ne supprime pas toujours totalement le SP. |\n| Très simple à mettre en place. | Impossible dans certains cas (structure imposée, suivi dans le temps). |\n\n. . .\n\nComment protéger le secret primaire restant ?\n\n# La suppression de cellules\n\n## Le secret primaire\n\nPremière étape : supprimer les cellules ne respectant pas les règles du secret primaire.\n\n|                   | Nord | Ouest | Est | Sud | Total |\n|:------------------|-----:|------:|----:|----:|------:|\n| **Polluante**     |    6 |    14 | <span style=\"color: red;\">X</span> |   7 |    28 |\n| **Non polluante** |    3 | <span style=\"color: red;\">X</span> | 3 |  13 |    21 |\n| **Total**         |    9 |    16 | 4 |  20 |    49 |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 1 – Nombre d'entreprises polluantes par région\n</div>\n. . .\n\nCe n'est pas suffisant, les cellules sont liées entre elles par des équations (marges).\n\n## Le secret secondaire\n\nDeuxième étape : supprimer des cellules pour protéger le secret primaire.\n\n|                   | Nord | Ouest |  Est | Sud | Total |\n|:------------------|-----:|------:|-----:|----:|------:|\n| **Polluante**     |    6 | <span style=\"color: red;\">X</span> | <span style=\"color: red;\">X</span> |   7 |    28 |\n| **Non polluante** |    3 | <span style=\"color: red;\">X</span> | <span style=\"color: red;\">X</span> |  13 |    21 |\n| **Total**         |    9 |    16                              | 4                                  |  20 |    49 |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 1 – Nombre d'entreprises polluantes par région\n</div>\n\n## Le secret secondaire\n\nPlusieurs structures de suppressions (masques de secret) sont possibles.\n\n|                   | Nord | Ouest |  Est | Sud | Total |\n|:------------------|-----:|------:|-----:|----:|------:|\n| **Polluante**     | <span style=\"color: red;\">X</span> |     14                             | <span style=\"color: red;\">X</span> |   7 |    28 |\n| **Non polluante** | <span style=\"color: red;\">X</span> | <span style=\"color: red;\">X</span> |   3                                |  13 |    21 |\n| **Total**         |    9 | <span style=\"color: red;\">X</span> | <span style=\"color: red;\">X</span> |  20 |    49 |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 1 – Nombre d'entreprises polluantes par région\n</div>\n\n## Les intervalles de protection\n\nCacher des cellules revient à diffuser des intervalles.\n\n|                   | Nord | Ouest    |  Est    | Sud | Total |\n|:------------------|-----:|---------:|--------:|----:|------:|\n| **Polluante**     |    6 | <span style=\"color: red;\">[11 ; 15]</span> | <span style=\"color: red;\">[0 ; 4]</span> |   7 |    28 |\n| **Non polluante** |    3 | <span style=\"color: red;\">[1 ; 5]</span> | <span style=\"color: red;\">[0 ; 4]</span> |  13 |    21 |\n| **Total**         |    9 |    16                              | 4                                  |  20 |    49 |\n\n\n**L'intervalle des possibles** : l'ensemble des valeurs possibles prises par la cellule supprimée après avoir posé le masque de secret.\n\n## Les intervalles de protection\n\n**L'intervalle de protection** : soit $V_C$ la valeur d'une cellule C sensible à la règle de fréquence et $m\\%$ la marge protection choisie.\n\n<br>\n\n$[(1 - m\\%). V_C ; (1 + m\\%). V_C]$\n\n<br>\n\nEn pratique on choisit souvent une marge de 10%, $[90\\%.V_C ; 110\\%.V_C]$\n\n## Les intervalles de protection\n\n| Région     | Harpes           | Piano            | Orgues           | Total            |\n|:-----------|-----------------:|-----------------:|-----------------:|-----------------:|\n| **Nord**   | 58 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (5)</span>   | 71 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (17)</span>  | 92 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (5)</span>   | 221 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (27)</span> |\n| **Centre** | 11 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (4)</span>   | 124 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (11)</span> | <span style=\"color:red;\" title=\"[141.3 ; 172.7]\">157</span>  <span style=\"color:red;\" title=\"n < 3\"> (2)</span>  | 292 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (17)</span> |\n| **Sud**    | 36 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (3)</span>   | 24 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (6)</span>   | <span style=\"color:red;\" title=\"[54 ; 66]\">60</span> <span style=\"color:red;\" title=\"n < 3\"> (1)</span>   | 120 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (10)</span> |\n| **Total**  | 105 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (12)</span> | 219 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (34)</span> | 309 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (8)</span>  | 633 <span style=\"color:blue;\" title=\"Nombre d'entreprises\"> (54)</span> |\n\n<div style=\"text-align: center; font-weight: bold; margin-bottom: 0.5em;\">\n  Tableau 2 – Répartition des ventes d'instruments par région et par type, en millions d'euros\n</div>\n\n<div style=\"font-size: 0.9em; margin-top: 0.5em;\">\n  <em>Note :</em> glisser la souris sur les valeurs en secret primaire de fréquence pour voir les intervalles de protection.\n</div>\n\n## Les intervalles de protection\n\n**Règle des intervalles** : l'intervalle de protection de chaque cellule sensible doit être inclus dans son intervalle des possibles.\n\n<br>\n\nCette règle permet de se prémunir d'une divulgation par inférence.\n\n## Les intervalles de protection\n\nExemple avec une marge de protection de 10%.\n\n| Région     | Harpe | Piano  | Orgue   | Autre   | Total     |\n|:-----------|------:|-------:|--------:|--------:|----------:|\n| **Nord**   | 58   | 71   | 92    | 800   | **1021**  |\n| **Centre** | 11    | 124  | <span style=\"color:red;\" title=\"[141 ; 173]\">157 (2)</span>   | 934    | **1226** |\n| **Sud**    | 36    | 24  | <span style=\"color:red;\" title=\"[54 ; 66]\">60 (1)</span>   | 651   | **771** |\n| **Total**  | **105** | **219** | **309**  | **2385** | **3018** |\n\n<div style=\"font-size: 0.9em; margin-top: 0.5em;\">\n  <em>Note :</em> glisser la souris sur les valeurs en secret primaire de fréquence pour voir les intervalles de protection.\n</div>\n\n## Les intervalles de protection\n\nExemple avec une marge de protection de 10%.\n\n| Région     | Harpe | Piano  | Orgue   | Autre   | Total     |\n|:-----------|------:|-------:|--------:|--------:|----------:|\n| **Nord**   | X   | 71   | X    | 800   | **1021**  |\n| **Centre** | X    | 124  | <span style=\"color:red;\" title=\"[141 ; 173]\">X</span>   | 934    | **1226** |\n| **Sud**    | X    | 24  | <span style=\"color:red;\" title=\"[54 ; 66]\">X</span>   | 651   | **771** |\n| **Total**  | **105** | **219** | **309**  | **2385** | **3018** |\n\n<div style=\"font-size: 0.9em; margin-top: 0.5em;\">\n  <em>Note :</em> glisser la souris sur les valeurs en secret primaire de fréquence pour voir les intervalles de protection.\n</div>\n\n## Les intervalles de protection\n\nExemple avec une marge de protection de 10%.\n\n| Région     | Harpe | Piano  | Orgue   | Autre   | Total     |\n|:-----------|------:|-------:|--------:|--------:|----------:|\n| **Nord**   | [0;105]   | 71   | [45;150]    | 800   | **1021**  |\n| **Centre** | [0;105]    | 124  | <span style=\"color:red;\" title=\"[141 ; 173]\">[63;168]</span>   | 934    | **1226** |\n| **Sud**    | [0;96]    | 24  | <span style=\"color:red;\" title=\"[54 ; 66]\">[0;96]</span>   | 651   | **771** |\n| **Total**  | **105** | **219** | **309**  | **2385** | **3018** |\n\n<div style=\"font-size: 0.9em; margin-top: 0.5em;\">\n  <em>Note :</em> glisser la souris sur les valeurs en secret primaire de fréquence pour voir les intervalles de protection.\n</div>\n\n## Les intervalles de protection\n\nLa borne supérieure de l'intervalle des possibles (168) est inférieure à la borne supérieure de l'intervalle de protection (173).\n\n\n::: {.cell layout-align=\"center\" fig.margin='false'}\n::: {.cell-output-display}\n![](methodes-suppressives_files/figure-revealjs/unnamed-chunk-1-1.png){fig-align='center' width=576}\n:::\n:::\n\n\n\n## Les intervalles de protection\n\n\n::: {.cell layout-align=\"center\" fig.margin='false'}\n::: {.cell-output-display}\n![](methodes-suppressives_files/figure-revealjs/unnamed-chunk-2-1.png){fig-align='center' width=576}\n:::\n:::\n\n\nOn peut inférer la valeur de la cellule à <span title=\"157 + (7/100)*157 = 168\">7%</span> et non 10%.\n\nLa cellule n'est pas suffisamment protégée.\n\n## Les intervalles de protection\n\nOn utilise un autre masque de secret ...\n\n| Région     | Harpe | Piano  | Orgue   | Autre   | Total     |\n|:-----------|------:|-------:|--------:|--------:|----------:|\n| **Nord**   | 58   | X   | X    | 800   | **1021**  |\n| **Centre** | 11    | X  | <span style=\"color:red;\" title=\"[141 ; 173]\">X</span>   | 934    | **1226** |\n| **Sud**    | 36    | X  | <span style=\"color:red;\" title=\"[54 ; 66]\">X</span>   | 651   | **771** |\n| **Total**  | **105** | **219** | **309**  | **2385** | **3018** |\n\n\n## Les intervalles de protection\n\n... avec d'autres intervalles des possibles.\n\n| Région     | Harpe | Piano  | Orgue   | Autre   | Total     |\n|:-----------|------:|-------:|--------:|--------:|----------:|\n| **Nord**   | 58   | [0;163]   | [0;163]    | 800   | **1021**  |\n| **Centre** | 11    | [0;219]  | <span style=\"color:red; font-weight: bold;\" title=\"[141 ; 173]\">[62;281]</span>   | 934    | **1226** |\n| **Sud**    | 36   | [0;84]  | <span style=\"color:red; font-weight: bold;\" title=\"[54 ; 66]\">[0;84]</span>   | 651   | **771** |\n| **Total**  | **105** | **219** | **309**  | **2385** | **3018** \n\n## Les intervalles de protection\n\n\n::: {.cell layout-align=\"center\" fig.margin='false'}\n::: {.cell-output-display}\n![](methodes-suppressives_files/figure-revealjs/unnamed-chunk-3-1.png){fig-align='center' width=576}\n:::\n:::\n\n\nAvec cet autre masque de secret la cellule est suffisamment protégée.\n\n## Minimiser la perte d'information\n\nPour minimiser la perte d'information, il faut définir pour chaque cellule un **coût** associé à sa suppression.\n\n<br>\n\nPlusieurs possibilités :\n\n- Le nombre de cellules supprimées\n- Le nombre de contributeurs concernés par les cases supprimées\n- La valeur de la cellule (défaut Tau-Argus)\n- Un autre variable / coût ajusté\n\n# Les outils\n\n## $\\tau$-Argus\n\n<div style=\"display: flex; align-items: center; justify-content: space-between;\">\n  <ul>\n    <li>Permet de calculer le secret primaire et secondaire ou faire des arrondis contrôlés</li>\n    <li>Développement maintenance et support : groupé d'expert européens coordonné par CBS</li>\n    <li>Logiciel de référence en Europe pour gérer la confidentialité des tableaux</li>\n    <li>Logiciel libre et open source</li>\n    <li>Dernière version stable 4.2.4 (26 avril 2023)</li>\n  </ul>\n  <img src=\"./img/tau_argus_logo.png\" alt=\"Tau-Argus Logo\" style=\"height: 200px; margin-left: 20px; object-fit: contain;\">\n</div>\n\n\n## $\\tau$-Argus\n\n| 👍 | 👎 |\n|:--:|:--:|\n| Outil qui fait référence. | Interface fouillis. |\n| Performant sur la partie pose de secret grâce à une optimisation globale. | Bugs et erreurs pas faciles à comprendre et corriger. |\n|Outil maintenu régulièrement. | Reproductibilité des opérations limitées. |\n\n## rtauargus\n\nUn package R pour bénéficier des avantages de $\\tau$-Argus tout en limitant les inconvénients.\n\n<div style=\"display: flex; align-items: flex-start; justify-content: space-between;\">\n  <ul>\n    <li>Développé à l'Insee</li>\n    <li>[Code open-source](https://github.com/InseeFrLab/rtauargus)\n</li>\n    <li>Version la plus récente 02/25 : v-1.2.999-dev</li>\n    <li>[Une documentation en ligne](https://inseefrlab.github.io/rtauargus/)</li>\n    <li>Utiliser les fonctions tab_XXX()</li>\n  </ul>\n  <img src=\"./img/rtauargus_logo_sans_fond.png\" alt=\"rtauargus Logo\" style=\"height: 200px; margin-left: 20px;\">\n</div>\n\n## rtauargus\n\nFonctionnement du package :\n\n- crée l'ensemble des fichiers dans les formats attendus par $\\tau$-Argus\n- Lance $\\tau$-Argus\n- Récupère les résultats dans R\n\n## rtauargus\n\n1) Poser le secret primaire \"manuellement\"\n2) Poser le secret secondaire avec :\n  - `tab_rtauargus()` : pour protéger un seul tableau\n  - `tab_multi_manager()` : pour protéger plusieurs tableaux\n  \n## rtauargus\n\nBesoin de retours utilisateurs : créer une [issue sur github](https://github.com/InseeFrLab/rtauargus/issues).\n\nOu nous contacter par [mail](mailto:dg75_dmcsi-confidentialite@insee.fr).\n\n\n# Les hiérarchies\n\n## Tableaux hiérarchisés\n\n![](./img/pres_hrc-clear.png)\n\n## Tableaux hiérarchisés\n\n![](./img/pres_hrc_2-clear.png)\n\n. . . \n\nSi on ne renseigne pas la hiérarchie, on peut retrouver la valeur cachée.\n\n## Tableaux hiérarchisés\n\n![](./img/pres_hrc_3-clear.png)\n\n. . .\n\nLorsque la hiérarchie est renseignée, on protège bien les données.\n\n## Le format Argus des hiérarchies\n\nDans $\\tau$-Argus les hiérarchies sont présentées dans un format particulier : fichier texte **.hrc**.\n\n- Doit décrire parfaitement l'emboîtement\n- Le nombre de @ désigne le niveau d'emboîtement de chaque catégorie\n- Ne fait pas apparaître le total\n- La fonction `write_hrc2()` permet de créer un fichier **.hrc** à partir d'une table de passage\n\n# Protéger des tableaux liés\n\n\n## Protéger des tableaux liés avec rtauargus\n\nUtiliser la fonction `tab_multi_manager()` :  \n\n1) L'utilisateur décrit les tableaux\n2) Fusion automatique de tous les tableaux entre eux\n3) Algorithme gère la protection itérative des tableaux\n\nN.B. La pose du secret à chaque itération est effectuée avec $\\tau$-Argus.\n\n. . .\n\nLa fonction `tab_multi_manager()` fournit un journal sous forme de reporting (étapes pose secret).\n\n# Analyser une demande\n\n## L'analyse d'une demande\nIl faut repérer les liens entre les tableaux pour poser un secret qui les protège vraiment.\n\nLes tableaux diffusés ne sont pas les mêmes que les tableaux à protéger.\n\n## Etapes de l'analyse\n1) Réunir les informations nécessaires à la description des tableaux\n\n- champ\n- variables de croisements\n- variable de réponses (i.e. indicateur)\n- tableaux de fréquence ou de volumes ?\n- description des emboîtements pour les hiérarchies\n- équations ou corrélations entre les variables de réponses\n\n## Etapes de l'analyse\n2) La demande peut-elle être découpée en sous-demandes indépendantes ?\n\n- champs différents et non complémentaires => \\perp\\!\\!\\!\\perp\n- variable de réponses différentes (et non liées par une équation / corrélation) => \\perp\\!\\!\\!\\perp\n- variables de croisement toutes différentes => \\perp\\!\\!\\!\\perp\n\nDans les cas d'indépendance il faut *gérer séparément les différentes sous-demandes*.\n\n## Etapes de l'analyse\n3) Lister les tableaux nécessaires pour la pose du secret\n\n- Certaines hiérarchies peuvent conduire à unifier des tableaux\n- Si tableaux additifs, construire un unique tableau en créant une variable supplémentaire\n- Si hiérarchie non-emboîtée, extraire les niveaux concernés pour construire un tableau supplémentaire\n\n## Etapes de l'analyse\n4) Préparer les hiérarchies\n\n- Détecter les variables hiérarchiques\n- Construire les fichiers .hrc nécessaires (manuellement ou avec `write_hrc2()`)\n\n# Liens spécifiques\n## Traiter un lien additif entre des variables réponses\n\n<div style=\"display: flex; gap: 20px;\">\n\n<div style=\"flex: 1;\">\n\n|       | reg1   | reg2   | **T**  |\n|-------|--------|--------|--------|\n| **tr1** | 5      | 10     | **15** |\n| **tr2** | 12     | 18     | **30** |\n| **tr3** | 5      | 5      | **10** |\n|  **T**  | **22** | **33** | **55** |\n<p style=\"text-align: center;\"><strong>CA couteaux</strong></p>\n</div>\n\n<div style=\"flex: 1;\">\n\n|       | reg1   | reg2   | **T**  |\n|-------|--------|--------|--------|\n| **tr1** | 3      | 8      | **11** |\n| **tr2** | 6      | 20     | **26** |\n| **tr3** | 2      | 6      | **8**  |\n| **T** | **11** | **34** | **45** |\n<p style=\"text-align: center;\"><strong>CA fourchettes</strong></p>\n</div>\n\n<div style=\"flex: 1;\">\n\n|       | reg1   | reg2   | **T**  |\n|-------|--------|--------|--------|\n| **tr1** | 8      | 18     | **26** |\n| **tr2** | 18     | 38     | **56** |\n| **tr3** | 7      | 11     | **18** |\n| **T** | **33** | **67** | **100**|\n<p style=\"text-align: center;\"><strong>CA couverts</strong></p>\n</div>\n\n</div>\n\n<br>\n\nLien entre les CA : \"couverts = couteaux + fourchettes\".\n\n## Traiter un lien additif entre des variables réponses\n\nNouvelle variable de croisement : \"type_couverts\".\n\n| **Région** |   **Tr**   |   **type_couverts**  |  **chiffre_affaires**  |\n| ---------- | ---------- | -------------------- | ---------------------- |\n| reg1       |     tr1    | couteaux             | 5                      |\n| reg1       |     tr1    | fourchettes          | 3                      |\n| reg1       |     tr1    | couverts             | 8                      |\n| ...        |     ...    | ...                  | ...                    |\n| **Total**  | **Total**  | **couverts**         | **100**                |\n\n\n\n## Traiter une hiérarchie non-emboîtée\n\n![](./img/hrc_non_emb-clear.png){fig-align=\"center\"}\n\n\n\nIci, l'agrégat `50+` ne peut pas être bien emboîté dans la hiérarchie.\n\n## Traiter une hiérarchie non-emboîtée\n\n![](./img/hrc_non_emb_grp-clear.png){fig-align=\"center\"}\n\nCréer un second tableau contenant uniquement la ventilation de 50+.\n\n## Traiter une hiérarchie non-emboîtée\n\n::: columns\n::: column\n`princ.hrc`\n\n<25  \n25-29  \n30-69  \n\\@30-49  \n\\@50-69  \n70+  \n:::\n\n::: column\n`alt.hrc`\n\n50-69  \n70+  \n:::\n:::\n\n\n\n\n",
    "supporting": [
      "methodes-suppressives_files/figure-revealjs"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}